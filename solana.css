/* ============================================
   SOLANA - macOS Style Theme for Discord
   Updated for Discord 2025 Visual Refresh
   ============================================ */

/*Variables*/
:root {
    --version: "2.0.0";
    
    /* ===== CUSTOMIZATION ===== */
    /* Accent Color (hue: 0-360, 235=blurple, 210=blue, 280=purple, 340=pink) */
    --accent-hue: 235;
    --accent-saturation: 85%;
    --accent-brightness: 65%;
    
    /* Window Margin (0 = no gap, 12+ = floating window) */
    --window-margin: 12px;
    --window-border-radius: 12px;
    
    /* Background Image (set to url('your-image.jpg') or none) */
    --background-image: none;
    --background-blur: 0px;
    --background-opacity: 0.85;
    
    /* Blur Effects (1 = on, 0 = off) */
    --enable-blur: 1;
    --blur-amount: 16px;
    
    /* ===== macOS COLORS ===== */
    /* Dark Mode */
    --macos-bg-dark: #1e1e1e;
    --macos-sidebar-dark: #2d2d2d;
    --macos-toolbar-dark: #3a3a3a;
    --macos-border-dark: rgba(255, 255, 255, 0.1);
    --macos-text-dark: #ffffff;
    --macos-text-secondary-dark: #999999;
    
    /* Light Mode */
    --macos-bg-light: #f5f5f5;
    --macos-sidebar-light: #e8e8e8;
    --macos-toolbar-light: #d4d4d4;
    --macos-border-light: rgba(0, 0, 0, 0.1);
    --macos-text-light: #000000;
    --macos-text-secondary-light: #666666;
    
    /* Traffic Light Buttons */
    --traffic-close: #ff5f57;
    --traffic-minimize: #febc2e;
    --traffic-maximize: #28c840;
    --traffic-inactive: #4a4a4a;
}

/* ============================================
   DARK THEME COLORS
   ============================================ */

.theme-dark {
    /* Primary backgrounds */
    --background-primary: #1a1a1a;
    --background-secondary: #232323;
    --background-secondary-alt: #202020;
    --background-tertiary: #141414;
    --background-accent: #2a2a2a;
    --background-floating: #1e1e1e;
    --background-mobile-primary: #1a1a1a;
    --background-mobile-secondary: #232323;
    
    /* Modifiers */
    --background-modifier-hover: rgba(255, 255, 255, 0.06);
    --background-modifier-active: rgba(255, 255, 255, 0.1);
    --background-modifier-selected: rgba(255, 255, 255, 0.12);
    --background-modifier-accent: rgba(255, 255, 255, 0.08);
    
    /* Text */
    --text-normal: #dcddde;
    --text-muted: #72767d;
    --text-link: hsl(var(--accent-hue), 100%, 70%);
    --header-primary: #ffffff;
    --header-secondary: #b9bbbe;
    
    /* Interactive */
    --interactive-normal: #b9bbbe;
    --interactive-hover: #dcddde;
    --interactive-active: #ffffff;
    --interactive-muted: #4f545c;
    
    /* Channels */
    --channels-default: #8e9297;
    
    /* Brand */
    --brand-experiment: hsl(var(--accent-hue), var(--accent-saturation), var(--accent-brightness));
    
    /* Scrollbar */
    --scrollbar-thin-thumb: #1a1a1a;
    --scrollbar-thin-track: transparent;
    --scrollbar-auto-thumb: #1a1a1a;
    --scrollbar-auto-track: #2b2d31;
    
    /* Elevation */
    --elevation-stroke: 0 0 0 1px rgba(4, 4, 5, 0.15);
    --elevation-low: 0 1px 0 rgba(4, 4, 5, 0.2), 0 1.5px 0 rgba(6, 6, 7, 0.05), 0 2px 0 rgba(4, 4, 5, 0.05);
    --elevation-medium: 0 4px 4px rgba(0, 0, 0, 0.16);
    --elevation-high: 0 8px 16px rgba(0, 0, 0, 0.24);
}

/* ============================================
   LIGHT THEME COLORS
   ============================================ */

.theme-light {
    --background-primary: #ffffff;
    --background-secondary: #f2f3f5;
    --background-secondary-alt: #ebedef;
    --background-tertiary: #e3e5e8;
    --background-accent: #f2f3f5;
    --background-floating: #ffffff;
    
    --background-modifier-hover: rgba(116, 127, 141, 0.08);
    --background-modifier-active: rgba(116, 127, 141, 0.16);
    --background-modifier-selected: rgba(116, 127, 141, 0.24);
    --background-modifier-accent: rgba(6, 6, 7, 0.08);
    
    --text-normal: #2e3338;
    --text-muted: #747f8d;
    --header-primary: #060607;
    --header-secondary: #4f5660;
    
    --interactive-normal: #4f5660;
    --interactive-hover: #2e3338;
    --interactive-active: #060607;
    --interactive-muted: #c7ccd1;
    
    --channels-default: #6d6f78;
}

/* ============================================
   WINDOW MARGIN & BORDER RADIUS
   ============================================ */

/* Apply window margin */
.app_b1f720,
.appMount_fae9dd,
[class*="app_"],
[class*="appMount_"] {
    padding: var(--window-margin) !important;
    box-sizing: border-box !important;
}

/* Main layers container */
[class*="layers_"],
[class*="baseLayer_"] {
    border-radius: var(--window-border-radius) !important;
    overflow: hidden !important;
}

/* Background image support */
.app_b1f720::before,
.appMount_fae9dd::before,
[class*="app_"]::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--background-image);
    background-size: cover;
    background-position: center;
    filter: blur(var(--background-blur));
    z-index: -1;
}

/* ============================================
   macOS TITLEBAR - TRAFFIC LIGHTS
   ============================================ */

/* Move titlebar to left, make it macOS style */
.platform-win [class*="titleBar_"],
.platform-win [class*="typeWindows_"] {
    position: fixed !important;
    left: calc(var(--window-margin) + 8px) !important;
    top: calc(var(--window-margin) + 8px) !important;
    right: auto !important;
    width: auto !important;
    height: auto !important;
    flex-direction: row !important;
    background: transparent !important;
    z-index: 9999 !important;
}

/* Hide wordmark */
.platform-win [class*="wordmark_"],
.platform-win [class*="wordmarkWindows_"] {
    display: none !important;
}

/* Traffic light buttons base */
.platform-win [class*="winButton_"] {
    width: 12px !important;
    height: 12px !important;
    min-width: 12px !important;
    min-height: 12px !important;
    max-width: 12px !important;
    max-height: 12px !important;
    margin: 0 4px !important;
    padding: 0 !important;
    border-radius: 50% !important;
    background-color: var(--traffic-inactive) !important;
    background-image: none !important;
    background-size: 0 !important;
    border: none !important;
    -webkit-app-region: no-drag !important;
    transition: background-color 0.15s ease !important;
}

/* Hide SVG icons */
.platform-win [class*="winButton_"] svg {
    display: none !important;
}

/* Close button - Red */
.platform-win.app-focused [class*="winButtonClose_"] {
    order: -3 !important;
    background-color: var(--traffic-close) !important;
}

/* Minimize button - Yellow (second button) */
.platform-win.app-focused [class*="winButtonMinMax_"]:first-of-type,
.platform-win.app-focused [class*="winButtonMinimize_"] {
    order: -2 !important;
    background-color: var(--traffic-minimize) !important;
}

/* Maximize button - Green (third button) */
.platform-win.app-focused [class*="winButtonMinMax_"]:last-of-type,
.platform-win.app-focused [class*="winButtonMaximize_"] {
    order: -1 !important;
    background-color: var(--traffic-maximize) !important;
}

/* Hover state - show icons */
.platform-win.app-focused [class*="titleBar_"]:hover [class*="winButtonClose_"],
.platform-win.app-focused [class*="typeWindows_"]:hover [class*="winButtonClose_"] {
    background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0.5 0.5L5.5 5.5M5.5 0.5L0.5 5.5' stroke='%234a0002' stroke-linecap='round'/%3E%3C/svg%3E") !important;
    background-size: 6px !important;
    background-position: center !important;
    background-repeat: no-repeat !important;
}

.platform-win.app-focused [class*="titleBar_"]:hover [class*="winButtonMinMax_"]:first-of-type,
.platform-win.app-focused [class*="typeWindows_"]:hover [class*="winButtonMinMax_"]:first-of-type,
.platform-win.app-focused [class*="titleBar_"]:hover [class*="winButtonMinimize_"],
.platform-win.app-focused [class*="typeWindows_"]:hover [class*="winButtonMinimize_"] {
    background-image: url("data:image/svg+xml,%3Csvg width='8' height='2' viewBox='0 0 8 2' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 1h8' stroke='%23985700' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E") !important;
    background-size: 8px !important;
    background-position: center !important;
    background-repeat: no-repeat !important;
}

.platform-win.app-focused [class*="titleBar_"]:hover [class*="winButtonMinMax_"]:last-of-type,
.platform-win.app-focused [class*="typeWindows_"]:hover [class*="winButtonMinMax_"]:last-of-type,
.platform-win.app-focused [class*="titleBar_"]:hover [class*="winButtonMaximize_"],
.platform-win.app-focused [class*="typeWindows_"]:hover [class*="winButtonMaximize_"] {
    background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0.5 3.5L0.5 0.5L3.5 0.5M5.5 2.5L5.5 5.5L2.5 5.5' stroke='%23006500' stroke-linecap='round'/%3E%3C/svg%3E") !important;
    background-size: 6px !important;
    background-position: center !important;
    background-repeat: no-repeat !important;
}

/* Unfocused window - all gray */
.platform-win:not(.app-focused) [class*="winButton_"] {
    background-color: var(--traffic-inactive) !important;
}

/* ============================================
   SERVER LIST (GUILDS)
   ============================================ */

/* Guilds wrapper */
[class*="wrapper_"][class*="guilds_"],
[class*="guilds_"] {
    background: transparent !important;
    padding-top: 40px !important; /* Space for traffic lights */
}

/* Server list scroller */
[class*="scroller_"][class*="guilds_"],
[class*="tree_"][class*="guilds_"] > div {
    background: var(--background-secondary) !important;
    border-radius: 12px !important;
    margin: 8px !important;
    padding: 8px 0 !important;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2) !important;
}

.theme-dark [class*="scroller_"][class*="guilds_"],
.theme-dark [class*="tree_"][class*="guilds_"] > div {
    background: rgba(40, 40, 40, 0.8) !important;
    backdrop-filter: blur(calc(var(--blur-amount) * var(--enable-blur))) !important;
    border: 1px solid var(--macos-border-dark) !important;
}

/* Server icons - round by default, squircle on hover */
[class*="wrapper_"][class*="guild_"] [class*="icon_"] {
    border-radius: 50% !important;
    transition: border-radius 0.2s ease-out !important;
}

[class*="wrapper_"][class*="guild_"]:hover [class*="icon_"],
[class*="wrapper_"][class*="selected_"] [class*="icon_"] {
    border-radius: 35% !important;
}

/* Folder styling */
[class*="folder_"] {
    background-color: rgba(255, 255, 255, 0.05) !important;
    border-radius: 16px !important;
}

[class*="expandedFolderBackground_"] {
    background-color: rgba(0, 0, 0, 0.2) !important;
    border-radius: 18px !important;
}

/* Separator */
[class*="guildSeparator_"] {
    background-color: rgba(255, 255, 255, 0.1) !important;
    height: 2px !important;
    border-radius: 1px !important;
    margin: 4px 14px !important;
}

/* ============================================
   SIDEBAR / CHANNEL LIST
   ============================================ */

[class*="sidebar_"]:not([class*="panels_"]),
[class*="container_"][class*="sidebar_"] {
    background: var(--background-secondary) !important;
    border-radius: var(--window-border-radius) 0 0 var(--window-border-radius) !important;
}

.theme-dark [class*="sidebar_"]:not([class*="panels_"]) {
    background: rgba(35, 35, 35, 0.95) !important;
    backdrop-filter: blur(calc(var(--blur-amount) * var(--enable-blur))) !important;
}

/* Channel items */
[class*="link_"][class*="channel_"],
[class*="wrapper_"][class*="channel_"] {
    border-radius: 6px !important;
    margin: 1px 8px !important;
}

[class*="link_"][class*="channel_"]:hover {
    background-color: var(--background-modifier-hover) !important;
}

[class*="modeSelected_"] [class*="link_"],
[class*="link_"][class*="selected_"] {
    background-color: var(--background-modifier-selected) !important;
}

/* ============================================
   USER PANEL (Bottom)
   ============================================ */

[class*="panels_"] {
    background: transparent !important;
}

[class*="container_"][class*="panels_"],
.theme-dark [class*="container_"][class*="panels_"] {
    background: linear-gradient(to top, rgba(20, 20, 20, 0.95), rgba(30, 30, 30, 0.9)) !important;
    border-top: 1px solid var(--macos-border-dark) !important;
    border-radius: 0 0 0 var(--window-border-radius) !important;
}

/* ============================================
   CHAT AREA
   ============================================ */

[class*="chat_"]:not([class*="sidebar_"]) {
    background: var(--background-primary) !important;
    border-radius: 0 var(--window-border-radius) var(--window-border-radius) 0 !important;
}

.theme-dark [class*="chat_"]:not([class*="sidebar_"]) {
    background: rgba(26, 26, 26, 0.95) !important;
    backdrop-filter: blur(calc(var(--blur-amount) * var(--enable-blur))) !important;
}

[class*="chatContent_"] {
    background: transparent !important;
}

/* Messages */
[class*="message_"][class*="cozy_"] {
    border-radius: 4px !important;
}

[class*="message_"][class*="mentioned_"] {
    background-color: rgba(250, 168, 26, 0.08) !important;
    border-left: 3px solid #faa81a !important;
}

/* ============================================
   CHANNEL HEADER
   ============================================ */

[class*="container_"][class*="header_"],
[class*="title_"][class*="container_"] {
    background: transparent !important;
    border-bottom: 1px solid var(--background-modifier-accent) !important;
}

.theme-dark [class*="container_"][class*="header_"] {
    background: linear-gradient(to bottom, rgba(45, 45, 45, 0.9), rgba(35, 35, 35, 0.8)) !important;
}

/* ============================================
   TEXT INPUT
   ============================================ */

[class*="channelTextArea_"] [class*="scrollableContainer_"] {
    background-color: var(--background-tertiary) !important;
    border: 1px solid var(--background-modifier-accent) !important;
    border-radius: 8px !important;
}

[class*="channelTextArea_"] [class*="scrollableContainer_"]:focus-within {
    border-color: hsl(var(--accent-hue), var(--accent-saturation), var(--accent-brightness)) !important;
}

/* ============================================
   MEMBERS LIST
   ============================================ */

[class*="members_"][class*="container_"] {
    background: var(--background-secondary) !important;
}

.theme-dark [class*="members_"][class*="container_"] {
    background: rgba(35, 35, 35, 0.95) !important;
    backdrop-filter: blur(calc(var(--blur-amount) * var(--enable-blur))) !important;
    border-left: 1px solid var(--macos-border-dark) !important;
}

[class*="member_"][class*="container_"] {
    border-radius: 6px !important;
    margin: 1px 8px !important;
}

/* ============================================
   POPOUTS & MODALS
   ============================================ */

[class*="popout_"],
[class*="menu_"][role="menu"],
[class*="contextMenu_"] {
    background: var(--background-floating) !important;
    border: 1px solid var(--background-modifier-accent) !important;
    border-radius: 10px !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3) !important;
}

.theme-dark [class*="popout_"],
.theme-dark [class*="menu_"][role="menu"] {
    background: rgba(30, 30, 30, 0.95) !important;
    backdrop-filter: blur(calc(var(--blur-amount) * var(--enable-blur))) !important;
}

[class*="menu_"] [class*="item_"],
[class*="contextMenu_"] [class*="item_"] {
    border-radius: 4px !important;
    margin: 2px 6px !important;
}

/* Modals */
[class*="modal_"][class*="root_"],
[class*="modalRoot_"] {
    background: var(--background-primary) !important;
    border: 1px solid var(--background-modifier-accent) !important;
    border-radius: 12px !important;
    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.4) !important;
}

/* ============================================
   USER POPOUT
   ============================================ */

[class*="userPopoutOuter_"],
[class*="userProfileOuter_"] {
    background: var(--background-floating) !important;
    border-radius: 12px !important;
    overflow: hidden !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3) !important;
}

.theme-dark [class*="userPopoutOuter_"] {
    background: rgba(30, 30, 30, 0.95) !important;
    backdrop-filter: blur(calc(var(--blur-amount) * var(--enable-blur))) !important;
    border: 1px solid var(--macos-border-dark) !important;
}

/* ============================================
   EMOJI PICKER
   ============================================ */

[class*="emojiPicker_"],
[class*="picker_"][class*="wrapper_"] {
    background: var(--background-floating) !important;
    border: 1px solid var(--background-modifier-accent) !important;
    border-radius: 12px !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3) !important;
}

.theme-dark [class*="emojiPicker_"] {
    background: rgba(30, 30, 30, 0.95) !important;
    backdrop-filter: blur(calc(var(--blur-amount) * var(--enable-blur))) !important;
}

/* ============================================
   SETTINGS
   ============================================ */

[class*="standardSidebarView_"] [class*="contentRegion_"] {
    background: var(--background-primary) !important;
}

[class*="standardSidebarView_"] [class*="sidebarRegion_"] {
    background: var(--background-secondary) !important;
}

[class*="side_"] [class*="item_"] {
    border-radius: 6px !important;
    margin: 2px 8px !important;
}

[class*="side_"] [class*="item_"][class*="selected_"] {
    background-color: var(--background-modifier-selected) !important;
}

/* ============================================
   SCROLLBARS - macOS Style
   ============================================ */

::-webkit-scrollbar {
    width: 8px !important;
    height: 8px !important;
}

::-webkit-scrollbar-track {
    background: transparent !important;
}

::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.15) !important;
    border-radius: 4px !important;
    border: 2px solid transparent !important;
    background-clip: padding-box !important;
}

::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255, 255, 255, 0.25) !important;
}

.theme-light ::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.2) !important;
}

.theme-light ::-webkit-scrollbar-thumb:hover {
    background-color: rgba(0, 0, 0, 0.35) !important;
}

/* Auto-hide scrollbars */
[class*="scroller_"]::-webkit-scrollbar-thumb {
    visibility: hidden;
}

[class*="scroller_"]:hover::-webkit-scrollbar-thumb {
    visibility: visible;
}

/* ============================================
   BUTTONS
   ============================================ */

[class*="button_"][class*="lookFilled_"][class*="colorBrand_"] {
    background-color: hsl(var(--accent-hue), var(--accent-saturation), var(--accent-brightness)) !important;
    border-radius: 6px !important;
}

[class*="button_"][class*="lookFilled_"][class*="colorBrand_"]:hover {
    background-color: hsl(var(--accent-hue), var(--accent-saturation), calc(var(--accent-brightness) - 5%)) !important;
}

/* ============================================
   TOOLTIPS
   ============================================ */

[class*="tooltip_"] {
    background: var(--background-floating) !important;
    border: 1px solid var(--background-modifier-accent) !important;
    border-radius: 6px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;
}

.theme-dark [class*="tooltip_"] {
    background: rgba(30, 30, 30, 0.95) !important;
    backdrop-filter: blur(calc(var(--blur-amount) * var(--enable-blur))) !important;
}

/* ============================================
   BETTERDISCORD ADDON SUPPORT
   ============================================ */

.bd-addon-list .bd-addon-card {
    background-color: var(--background-secondary) !important;
    border: 1px solid var(--background-modifier-accent) !important;
    border-radius: 8px !important;
}

.bd-addon-card:hover {
    background-color: var(--background-modifier-hover) !important;
}

.bd-toast {
    background: var(--background-floating) !important;
    border: 1px solid var(--background-modifier-accent) !important;
    border-radius: 8px !important;
}

/* ============================================
   ANIMATIONS
   ============================================ */

@keyframes popout-open {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

[class*="layerContainer_"] [class*="layer_"] {
    animation: popout-open 0.15s ease-out;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
